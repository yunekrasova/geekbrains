<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:with="title = 'Задачи'">
    <head th:replace="include/header :: common_header(${title})">
    </head>
    <body>
    <div class="content">
        <div th:insert="include/header :: logo"></div>
        <h1 th:text="${title}"></h1>

        <form th:action="@{/tasks/form}" th:object="${task}" method="POST">
            <input th:if="*{id != null}" type="hidden" th:field="*{id}"/>
            <table class="task-table">
                <tbody>
                <tr>
                    <td>Название задачи</td>
                    <td><input type="text" th:field="*{caption}" placeholder="Название задачи"/>
                        <div class="field-error" th:if="${#fields.hasErrors('caption')}" th:errors="*{caption}"/>
                    </td>
                </tr>
                <tr>
                    <td>Инициатор</td>
                    <td>
                        <input th:field="*{owner}" placeholder="Инициатор"/>
                        <div class="field-error" th:if="${#fields.hasErrors('owner')}" th:errors="*{owner}"/>
                    </td>
                </tr>
                <tr>
                    <td>Описание</td>
                    <td>
                        <input th:field="*{description}" placeholder="Описание"/>
                        <div class="field-error" th:if="${#fields.hasErrors('description')}"
                             th:errors="*{description}"/>
                    </td>
                </tr>
                <tr th:if="*{id != null}">
                    <td>Статус</td>
                    <td>
                        <select th:field="*{status}">
                            <option th:each="status : ${T(com.geekbrains.tasktracker.entities.Task.Status).values()}"
                                    th:value="${status}"
                                    th:text="${status.getRussianTitle()}">
                            </option>
                        </select>
                    </td>
                </tr>
                <tr th:if="*{id != null}">
                    <td>Назначена</td>
                    <td>
                        <input th:field="*{assigned}" placeholder="Назначена на"/>
                        <div class="field-error" th:if="${#fields.hasErrors('assigned')}" th:errors="*{assigned}"/>
                    </td>
                </tr>
                <tr>
                    <td th:if="*{id == null}" colspan="2"><input type="submit" value="Добавить"/></td>
                    <td th:if="*{id != null}" colspan="2">
                        <input type="submit" value="Сохранить"/>
                        <input type="submit" name="delete_action" value="Удалить"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>
        <div th:insert="include/footer :: common_footer"></div>
    </div>
    </body>
</th:block>
</html>